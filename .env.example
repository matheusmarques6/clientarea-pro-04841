# ============================================================================
# CONVERTFY CLIENT AREA - ENVIRONMENT VARIABLES
# ============================================================================
# Copy this file to .env and fill in your actual values
# NEVER commit .env to version control!

# ----------------------------------------------------------------------------
# SUPABASE CONFIGURATION
# ----------------------------------------------------------------------------
# Your Supabase project URL
VITE_SUPABASE_URL=https://YOUR_PROJECT_ID.supabase.co

# Supabase publishable (anon) key - Safe to expose in frontend
VITE_SUPABASE_PUBLISHABLE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...

# Supabase project ID (for admin operations)
VITE_SUPABASE_PROJECT_ID=your-project-id

# ----------------------------------------------------------------------------
# SECRETS (BACKEND ONLY - DO NOT EXPOSE TO FRONTEND)
# ----------------------------------------------------------------------------
# Service role key - NEVER expose in frontend! Only use in Edge Functions
# Find in: Supabase Dashboard > Settings > API > service_role key
SUPABASE_SERVICE_ROLE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...

# Webhook secret for N8N integration
# Generate with: openssl rand -hex 32
N8N_WEBHOOK_SECRET=

# Encryption key for API credentials (must be 32 bytes)
# Generate with: openssl rand -base64 32
ENCRYPTION_KEY=

# ----------------------------------------------------------------------------
# ENVIRONMENT CONFIGURATION
# ----------------------------------------------------------------------------
# Current environment: development | staging | production
ENVIRONMENT=development

# Log level: debug | info | warn | error
# Recommended: debug (dev), info (staging), error (production)
LOG_LEVEL=info

# ----------------------------------------------------------------------------
# CORS CONFIGURATION
# ----------------------------------------------------------------------------
# Comma-separated list of allowed origins (optional - uses env defaults)
# Example: https://app.convertfy.com,https://staging.convertfy.com
ALLOWED_ORIGINS=

# ----------------------------------------------------------------------------
# API VERSIONS
# ----------------------------------------------------------------------------
# Shopify Admin API version
# See: https://shopify.dev/docs/api/admin-rest
SHOPIFY_API_VERSION=2024-10

# Klaviyo API version
# See: https://developers.klaviyo.com/en/docs/api_versioning_and_deprecation_policy
KLAVIYO_API_VERSION=2024-10-15

# ----------------------------------------------------------------------------
# PERFORMANCE & RATE LIMITING
# ----------------------------------------------------------------------------
# Maximum concurrent sync jobs running at once
MAX_CONCURRENT_SYNCS=3

# Shopify rate limit (requests per second)
# Shopify allows 2 req/s with bucket leaky algorithm
RATE_LIMIT_SHOPIFY=2

# Klaviyo rate limit (requests per second)
# Varies by plan - check your Klaviyo account tier
RATE_LIMIT_KLAVIYO=3

# Maximum orders to process per sync (prevent memory overflow)
MAX_ORDERS_PER_SYNC=5000

# Sync timeout in seconds (Supabase Edge Functions: 150s max)
SYNC_TIMEOUT_SECONDS=120

# ----------------------------------------------------------------------------
# FEATURE FLAGS
# ----------------------------------------------------------------------------
# Enable new streaming architecture for Shopify sync
FEATURE_STREAMING=false

# Enable optimized database queries
FEATURE_OPTIMIZED_QUERIES=false

# Enable webhook signature validation
FEATURE_WEBHOOK_VALIDATION=false

# ----------------------------------------------------------------------------
# MONITORING & DEBUGGING
# ----------------------------------------------------------------------------
# Sentry DSN for error tracking (optional)
SENTRY_DSN=

# Enable performance monitoring
ENABLE_PERFORMANCE_MONITORING=false

# ----------------------------------------------------------------------------
# DEPLOYMENT CONFIGURATION
# ----------------------------------------------------------------------------
# Base URL for the application
VITE_APP_URL=http://localhost:8080

# API base URL (usually same as Supabase URL)
VITE_API_URL=

# ----------------------------------------------------------------------------
# OPTIONAL INTEGRATIONS
# ----------------------------------------------------------------------------
# N8N webhook endpoint (if using external N8N)
N8N_WEBHOOK_URL=

# Stripe API key (for payment processing - if applicable)
STRIPE_SECRET_KEY=

# ----------------------------------------------------------------------------
# NOTES
# ----------------------------------------------------------------------------
# 1. Frontend variables (VITE_*) are bundled in the client code
# 2. Backend variables (no prefix) are only available in Edge Functions
# 3. Generate strong secrets using: openssl rand -hex 32
# 4. Never share or commit .env files
# 5. Use different values for dev/staging/production environments
